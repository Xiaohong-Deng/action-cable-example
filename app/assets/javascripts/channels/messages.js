// Generated by CoffeeScript 1.12.6
var submit_message;

App.chatrooms = App.cable.subscriptions.create("MessagesChannel", {
  connected: function() {},
  disconnected: function() {},
  received: function(data) {
    $('#messages_' + data.chatroom_id).removeClass('hidden');
    return $('#messages_' + data.chatroom_id).append(this.renderMessage(data));
  },
  renderMessage: function(data) {
    return "<p> <b>" + data.user + ": </b>" + data.message + "</p>";
  }
});

$(document).on('turbolinks:load', function() {
  return submit_message();
});

submit_message = function() {
  return $('#message_content').on('keydown', function(event) {
    if (event.keyCode === 13 && !event.shiftKey) {
      $('input').click();
      event.target.value = "";
      return event.preventDefault();
    }
  });
};
